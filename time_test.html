<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css">
  <link rel="stylesheet" href="css/time_test.css" />
  <script type="text/javascript">
        
    var today = new Date();
    function buildCalendar(){
      var row = null
      var cnt = 0;
      var calendarTable = document.getElementById("calendar");
      var calendarTableTitle = document.getElementById("calendarTitle");
      calendarTableTitle.innerHTML = today.getFullYear()+"년"+(today.getMonth()+1)+"월";
      
      var firstDate = new Date(today.getFullYear(), today.getMonth(), 1);
      var lastDate = new Date(today.getFullYear(), today.getMonth()+1, 0);
      while(calendarTable.rows.length > 2){
          calendarTable.deleteRow(calendarTable.rows.length -1);
      }
    
      row = calendarTable.insertRow();
      for(i = 0; i < firstDate.getDay(); i++){
          cell = row.insertCell();
          cnt += 1;
      }
    
     
    
      for(i = 1; i <= lastDate.getDate(); i++){
          cell = row.insertCell();
          cnt += 1;
    
        cell.setAttribute('id', i);
          cell.innerHTML = i;
          cell.align = "center";
    
        cell.onclick = function(){
            clickedYear = today.getFullYear();
            clickedMonth = ( 1 + today.getMonth() );
            clickedDate = this.getAttribute('id');
    
            clickedDate = clickedDate >= 10 ? clickedDate : '0' + clickedDate;
            clickedMonth = clickedMonth >= 10 ? clickedMonth : '0' + clickedMonth;
            clickedYMD = clickedYear + "-" + clickedMonth + "-" + clickedDate;
    
            opener.document.getElementById("date").value = clickedYMD;
            self.close();

            
            
        }
        
    
        if (cnt % 7 == 1) {
            cell.innerHTML = "<font color=#F79DC2>" + i + "</font>";
        }
    
        if (cnt % 7 == 0){
            cell.innerHTML = "<font color=skyblue>" + i + "</font>";
            row = calendar.insertRow();
        }
      }
    
      if(cnt % 7 != 0){
          for(i = 0; i < 7 - (cnt % 7); i++){
              cell = row.insertCell();
          }
      }
    }
    
    function prevCalendar(){
        today = new Date(today.getFullYear(), today.getMonth()-1, today.getDate());
        buildCalendar();
    }
    
    function nextCalendar(){
        today = new Date(today.getFullYear(), today.getMonth()+1, today.getDate());
        buildCalendar();
    }
 </script>

 <script type="text/javascript">	
//JSTL을 사용해 jsva script의 array에 입력
var thisMonthFullDateList = new Array();
<c:forEach items="${thisMonthFullDateList}" var = "date">
    thisMonthFullDateList.push(${date});
</c:forEach>
var nextMonthFullDateList = new Array();
<c:forEach items="${nextMonthFullDateList}" var = "date">
    nextMonthFullDateList.push(${date});
</c:forEach>


 

//-------calendar--------------
var today = new Date();
var date = new Date();
//사용자가 클릭한 셀 객체 저장
var selectedCell;
//오늘 기준으로 불현하는 월. 일 객체
var realMonth = date.getMonth()+1;
var realToDay = date.getDate();
//사용자가 클릭한 일자의 월, 일 객체
var selectedMonth = null;
var selectedDate = null;

function prevCalendar(){
if (today.getMonth() < realMonth){
    alert("예약은 금일기준 다음날부터 30일 이후까지만 가능합니다.");	
    return false;
}
today = new Date(today.getFullYear(), today.getMonth()-1, today.getDate());
buildCalendar();
};
function nextCalendar(){
if(today.getMonth()+1 == (realMonth + 1)){
    alert("예약은 금일기준 다음날부터 30일 이후까지만 가능합니다.");
    return false;
}
today = new Date(today.getFullYear(), today.getMonth()+1, today.getDate());
buildCalendar();
};
function buildCalendar(){
    row = null;
    cnt = 0;
    nowMonth = today.getMonth()+1;
monthEquals = thisMonth(nowMonth, realMonth);
};

function exchangeToPosibleDay(num){
result = num % 7;
result -= 1;
if (result == -1) {
    result = 6;
}
return result; 
}

function thisMonth(todayMonth, dateMonth){
if (todayMonth*1 == dateMonth*1){
    return 0;
} 
return 1;
}


for(i = 1; i <= lastDate.getDate(); i++){
noCount = 0;
etp = exchangeToPosibleDay(cnt)*1;
}
if (nowMonth == realMonth && i <= realToDay) {
noCount +=1;
} else if (nowMonth > realMonth && i > realToDay) {
noCount +=1;
} else if (possibleDay[etp] == 0){
noCount +=1;
}


if (noCount > 0){
cell.style.backgroundColor = "#E0E0E0";
cell.innerHTML = "<font color='#C6C6C6' >" + i + "</font>";
} else {
cell.onclick = function(){
selectedTimeAndTotalPriceInit();
selectedMonth = today.getMonth() + 1;
selectedDate = this.getAttribute('id');
if(selectedCell != null){
selectedCell.bgColor = "#FFFFFF";
}
selectedCell = this;
this.bgColor = "#fbedaa";
fullDate = [];
    if(monthEquals == 0){
        fullDate = thisMonthFullDateList;
    }else {
        fullDate = nextMonthFullDateList;;
    }
    for (var i = 0; i < fullDate.length; i++){
        cell = document.getElementById(fullDate[i]);
        cell.style.backgroundColor = "#E0E0E0";
        cell.style.color = '#C6C6C6';
        cell.onclick = function(){};
    }
}
}
</script>

  <title>날짜 테스트</title>
</head>
<body>
    <div class="top-wrap">
        <div class="top-box1 flex flex-jc-sb flex-ai-c">
            <ul class="icon-box">
                <li class="icon login">
                    <a href="login.html">
                        <div class="img-box">
                            <img src="img/login_icon.png" alt="">
                        </div>
                        login
                    </a>
                    <div class="line-icon"></div>
                </li>
                <li class="icon join">
                    <a href="join.html">
                        <div class="img-box">
                            <img src="img/join_icon.png" alt="">
                        </div>
                        join
                    </a>
                    <div class="line-icon"></div>
                </li>
                <li class="icon cart">
                    <a href="cart.html">
                        <div class="img-box">
                            <img src="img/cart_icon.png" alt="">
                        </div>
                        cart
                    </a>
                </li>
            </ul>
            <div class="logo-box flex flex-jc-c">
                <div class="img-box">
                    <a href="main.html">
                        <img src="img/logo.png" alt="">
                    </a>
                </div>
            </div>
            <div class="search_wrap">
                <form accept-charset="utf-8" name="search" class="search-box flex flex-jc-end"
                    method="get" action="NextFile.jsp" onsubmit="return keyword_check()" autocomplete=off>
                    <td class="icon">
                        <input class="form" name="keyword" type="text" placeholder="검색어를 입력해주세요." >
                    </td>
                    <td class="schBtn">
                        <input type="image" src="img/Search_thin_icon.png" alt="검색" onsubmit="search_form()" style="width: 30px; height: 30px;">
                    </td>
                    <!-- <a href="searchform.html" class="btn_search">
                            <div class="img-box">
                                <img src="img/Search_thin_icon.png" alt="">
                            </div>
                        </a> -->
                </form>
            </div>

        </div>
        <div class="line"></div>


        <div class="top-box2">
            <ul class="flex flex-jc-c">
                <li class="menu">
                    <a>회사소개</a>
                    <div>
                        <ul>
                            <li><a href="about_1.html">더케어란?</a>
                            </li>
                            <li><a href="about_2.html">더케어 의료진</a></li>
                            <li><a href="about_3.html">더케어 오시는길</a></li>
                        </ul>
                    </div>
                </li>
                <li class="menu">
                    <a>시술안내</a>
                    <div>
                        <ul>
                            <li><a href="guide.html">시술안내</a></li>
                            <li><a href="review.html">전후사진</a></li>
                        </ul>
                    </div>
                </li>
                <li class="menu">
                    <a>시술예약</a>
                    <div>
                        <ul>
                            <li><a href="reservation.html">시술예약</a></li>
                            <li><a href="change.html">예약확인/변경/취소</a></li>
                            <li><a href="new_view.html">최근본시술</a></li>
                        </ul>
                    </div>
                </li>
                
                <li class="menu">
                    <a href="custom.html">맞춤시술</a>
                </li>
                <li class="menu">
                    <a>커뮤니티</a>
                    <div>
                        <ul>
                            <li><a href="noti.html">공지사항</a></li>
                            <li><a href="qna.html">1:1문의</a></li>
                            <li><a href="event.html">이벤트</a></li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
    </div>


    <script type="text/javascript">
        
        var today = new Date();
        function buildCalendar(){
          var row = null
          var cnt = 0;
          var calendarTable = document.getElementById("calendar");
          var calendarTableTitle = document.getElementById("calendarTitle");
          calendarTableTitle.innerHTML = today.getFullYear()+"년"+(today.getMonth()+1)+"월";
          
          var firstDate = new Date(today.getFullYear(), today.getMonth(), 1);
          var lastDate = new Date(today.getFullYear(), today.getMonth()+1, 0);
          while(calendarTable.rows.length > 2){
              calendarTable.deleteRow(calendarTable.rows.length -1);
          }
        
          row = calendarTable.insertRow();
          for(i = 0; i < firstDate.getDay(); i++){
              cell = row.insertCell();
              cnt += 1;
          }
        
         
        
          for(i = 1; i <= lastDate.getDate(); i++){
              cell = row.insertCell();
              cnt += 1;
        
            cell.setAttribute('id', i);
              cell.innerHTML = i;
              cell.align = "center";
        
            cell.onclick = function(){
                clickedYear = today.getFullYear();
                clickedMonth = ( 1 + today.getMonth() );
                clickedDate = this.getAttribute('id');
        
                clickedDate = clickedDate >= 10 ? clickedDate : '0' + clickedDate;
                clickedMonth = clickedMonth >= 10 ? clickedMonth : '0' + clickedMonth;
                clickedYMD = clickedYear + "-" + clickedMonth + "-" + clickedDate;
        
                opener.document.getElementById("date").value = clickedYMD;
                self.close();

                
                
            }
            
        
            if (cnt % 7 == 1) {
                cell.innerHTML = "<font color=#F79DC2>" + i + "</font>";
            }
        
            if (cnt % 7 == 0){
                cell.innerHTML = "<font color=skyblue>" + i + "</font>";
                row = calendar.insertRow();
            }
          }
        
          if(cnt % 7 != 0){
              for(i = 0; i < 7 - (cnt % 7); i++){
                  cell = row.insertCell();
              }
          }
        }
        
        function prevCalendar(){
            today = new Date(today.cvr(), today.getMonth()-1, today.getDate());
            buildCalendar();
        }
        
        function nextCalendar(){
            today = new Date(today.getFullYear(), today.getMonth()+1, today.getDate());
            buildCalendar();
        }
        

        


        


        
        </script>




        <body>
            <h1>날짜 선택</h1>
        <table id="calendar">
                <tr>
                    <td ><label onclick="prevCalendar()"> ◀ </label></td>
                    <td colspan="5" id="calendarTitle">yyyy년 m월</td>
                    <td ><label onclick="nextCalendar()"> ▶ </label></td>
                </tr>
                <tr>
                    <td style="color: red;">일</td>
                    <td>월</td>
                    <td>화</td>
                    <td>수</td>
                    <td>목</td>
                    <td>금</td>
                    <td style ="color :skyblue">토</td>
                </tr>
                <script type="text/javascript">buildCalendar();</script>
            </table>


            <h1>시간 선택</h1>

            <section class="ContactReserveForm_ContRight " alt="시간선택">
                <h2 alt="예약 시간">시간 선택</h2>
                <div class="BookingTimeArea" alt="예약시간">
                                            
                    <ul class="List">
                        
                                                    <li title="예약불가">
                            <label class="Time_Impossible"><p><strong>10:00</strong></p></label>
                        </li>
                        
                        
                                                    <li id="1030" title="예약가능" onclick="ableTimeCheckApply('1030','10:30','11:00');setSubject('N','');">
                            <label><p><strong>10:30</strong></p></label>
                        </li>
                        
                        
                                                    <li id="1100" title="예약가능" onclick="ableTimeCheckApply('1100','11:00','11:30');setSubject('N','');">
                            <label><p><strong>11:00</strong></p></label>
                        </li>
                        
                        
                                                    <li id="1130" title="예약가능" onclick="ableTimeCheckApply('1130','11:30','12:00');setSubject('N','');">
                            <label><p><strong>11:30</strong></p></label>
                        </li>
                        
                        
                                                    <li id="1200" title="예약가능" onclick="ableTimeCheckApply('1200','12:00','12:30');setSubject('N','');">
                            <label><p><strong>12:00</strong></p></label>
                        </li>
                        
                        
                                                    <li id="1230" title="예약가능" onclick="ableTimeCheckApply('1230','12:30','13:00');setSubject('N','');">
                            <label><p><strong>12:30</strong></p></label>
                        </li>
                        
                        
                                                    <li title="예약불가">
                            <label class="Time_Impossible"><p><strong>13:00</strong></p></label>
                        </li>
                        
                        
                                                    <li title="예약불가">
                            <label class="Time_Impossible"><p><strong>13:30</strong></p></label>
                        </li>
                        
                        
                                                    <li title="예약불가">
                            <label class="Time_Impossible"><p><strong>14:00</strong></p></label>
                        </li>
                        
                        
                                                    <li id="1430" title="예약가능" onclick="ableTimeCheckApply('1430','14:30','15:00');setSubject('N','');">
                            <label><p><strong>14:30</strong></p></label>
                        </li>
                        
                        
                                                    <li id="1500" title="예약가능" onclick="ableTimeCheckApply('1500','15:00','15:30');setSubject('N','');">
                            <label><p><strong>15:00</strong></p></label>
                        </li>
                        
                        
                                                    <li id="1530" title="예약가능" onclick="ableTimeCheckApply('1530','15:30','16:00');setSubject('N','');">
                            <label><p><strong>15:30</strong></p></label>
                        </li>
                        
                        
                                                    <li id="1600" title="예약가능" onclick="ableTimeCheckApply('1600','16:00','16:30');setSubject('N','');">
                            <label><p><strong>16:00</strong></p></label>
                        </li>
                        
                        
                                                    <li id="1630" title="예약가능" onclick="ableTimeCheckApply('1630','16:30','17:00');setSubject('N','');">
                            <label><p><strong>16:30</strong></p></label>
                        </li>
                        
                        
                                                    <li id="1700" title="예약가능" onclick="ableTimeCheckApply('1700','17:00','17:30');setSubject('N','');">
                            <label><p><strong>17:00</strong></p></label>
                        </li>
                        
                        
                                                    <li id="1730" title="예약가능" onclick="ableTimeCheckApply('1730','17:30','18:00');setSubject('N','');">
                            <label><p><strong>17:30</strong></p></label>
                        </li>
                        
                        
                                                    <li id="1800" title="예약가능" onclick="ableTimeCheckApply('1800','18:00','18:30');setSubject('N','');">
                            <label><p><strong>18:00</strong></p></label>
                        </li>
                        
                        
                                                    <li id="1830" title="예약가능" onclick="ableTimeCheckApply('1830','18:30','19:00');setSubject('N','');">
                            <label><p><strong>18:30</strong></p></label>
                        </li>
                        
                        
                                                    <li id="1900" title="예약가능" onclick="ableTimeCheckApply('1900','19:00','19:30');setSubject('N','');">
                            <label><p><strong>19:00</strong></p></label>
                        </li>
                        
                        
                                                    <li id="1930" title="예약가능" onclick="ableTimeCheckApply('1930','19:30','20:00');setSubject('N','');">
                            <label><p><strong>19:30</strong></p></label>
                        </li>
                        
                        
                                                    <li title="예약불가">
                            <label class="Time_Impossible"><p><strong>20:00</strong></p></label>
                        </li>
                        
                                                </ul>
                </div>
            </section>


       <!-- Swiper JS -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/ScrollTrigger.min.js"></script>



    <!-- Initialize Swiper -->

    <!-- 3. 실행 스크립트 -->
    <script>
        var swiper = new Swiper(".mySwiper", {
            cssMode: true,
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
            pagination: {
                el: ".swiper-pagination",
                clickable: true // 버튼 클릭 여부
            },
            autoplay: true,
            autoplaySpeed: 5000,
            keyboard: true
        });


        function SliderBox1__init() {
            $('.slider-box-1 > .slick').slick({
                autoplay: true,
                autoplaySpeed: 5000,
                pauseOnHover: false,
                slidesToShow: 3,
                slidesToScroll: 3,
                responsive: [{
                    breakpoint: 1050, // 화면의 넓이가 600px 이상일 때 
                    settings: {
                        slidesToShow: 2,
                        slidesToScroll: 2
                    }
                }, {
                    breakpoint: 850, // 화면의 넓이가 320px 이상일 때 
                    settings: {
                        slidesToShow: 1,
                        slidesToScroll: 1
                    }
                }],

                // arrows:true,
                prevArrow: ".slider-box-1 > .arrows > .btn-left",
                nextArrow: ".slider-box-1 > .arrows > .btn-right"
            });
        }

        $(function () {
            SliderBox1__init();
        });


        function SliderBox2__init() {
            $('.slider-box-2 > .slick').slick({
                autoplay: true,
                autoplaySpeed: 5000,
                pauseOnHover: false,
                slidesToShow: 1,
                slidesToScroll: 1,
                // responsive: [{
                //     breakpoint: 1050, // 화면의 넓이가 600px 이상일 때 
                //     settings: {
                //         slidesToShow: 2,
                //         slidesToScroll: 2
                //     }
                // }, {
                //     breakpoint: 850, // 화면의 넓이가 320px 이상일 때 
                //     settings: {
                //         slidesToShow: 1,
                //         slidesToScroll: 1
                //     }
                // }],

                // arrows:true,
                prevArrow: ".slider-box-2 > .arrows > .btn-left",
                nextArrow: ".slider-box-2 > .arrows > .btn-right"
            });
        }

        $(function () {
            SliderBox2__init();
        });


        //         gsap.to('body', {
        //   scrollTrigger:{
        //     start:'top 0',
        //     end:'top 800px',
        //     trigger:'.top-box2',
        //     markers: true,
        //     pin:true
        //   },
        // });

        gsap.to('.top-wrap > .top-box2', {
            scrollTrigger: {
                trigger: '.top-wrap',
                start: 'top -98px',
                scrub: true
            },
            height: '60px',
            textalign: 'center',
            top: '0',
            position: 'fixed',
            background: '#fff',
            borderBottom: '1px solid #ccc'
        });
    </script>    


          
</body>
</html>